package org.getopentest.appium;

import io.appium.java_client.MobileDriver;
import io.appium.java_client.MobileElement;
import io.appium.java_client.TouchAction;
import org.openqa.selenium.By;

/**
 * This is action can be used to perform a long press gesture on a UI element
 * for a specified duration.
 */
public class LongPress extends AppiumTestAction {

    @Override
    public void run() {
        super.run();

        By locator = this.readLocatorArgument("locator");
        Integer durationMs = this.readIntArgument("durationMs", null);

        MobileElement element = getElement(locator);
        TouchAction action = new TouchAction((MobileDriver) driver);
        
        if (durationMs == null) {
            action.longPress(element);
        } else {
            action.longPress(element, durationMs);
        }
        
        action.release().perform();
    }
}
