package dtest.seleniumactions;

import java.util.concurrent.TimeUnit;
import java.util.logging.Level;
import java.util.logging.Logger;
import org.openqa.selenium.By;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;

/**
 * Launch a browser window to be used for Web UI test automation.
 */
public class SwitchToAlert extends WebTestAction {

    @Override
    public void run() {

        super.run();

        String todo = this.readStringArgument("todo");
        
        WebDriverWait  wait = new WebDriverWait(driver,10);
        wait.until(ExpectedConditions.alertIsPresent());
        
        switch (todo.toLowerCase()) {
            case "accept":
                this.driver.switchTo().alert().accept();
                break;
            case "dismiss":
                this.driver.switchTo().alert().dismiss();
                break;
            case "gettext":
                String alertText = this.driver.switchTo().alert().getText();
                this.writeOutput("alertText", alertText);
                break;
            default:
                throw new RuntimeException(
                    "You must provide at least one of the following arguments: accept, dismiss, getText.");
        }
    }
}
