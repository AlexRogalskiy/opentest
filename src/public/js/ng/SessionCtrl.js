ngApp.controller('SessionCtrl', ['$scope', '$http', '$window', function($scope, $http, $window) {
	var sessionId = $window.sessionId;

	$scope.vm = {
		cancelSession: cancelSession,
		init: init,
		Math: Math,
		moment: moment,
		session: null
	};

	init(sessionId);
	
	function init(sessionId) {
		refreshSession($window.sessionId);
	}

	function cancelSession(sessionId) {
		$http.delete('/api/session/' + sessionId)
		.then(
			function success(res) {
				refreshSession(sessionId);
			},
			function error(res) {
				console.log(res.data);
			});
	}

	function refreshSession(sessionId) {
		$http.get('/api/session/' + sessionId)
		.then(
			function success(res) {
				$scope.vm.session = res.data;
			},
			function error(res) {
				console.log(res.data);
			});
	}
}])