package org.getopentest.actions;

import org.getopentest.base.TestAction;
import org.getopentest.util.TypeConverter;

/**
 * An action that fails the current test.
 */
public class Assert extends TestAction {

    @Override
    public void run() {
        String condition = this.readStringArgument("condition");
        String failMessage = this.readStringArgument("failMessage", "Assertion failed");
        String passMessage = this.readStringArgument("passMessage");

        Boolean conditionResult = TypeConverter.toBooolean(this.getActor().evalScript(condition));
        if (!conditionResult) {
            throw new RuntimeException(failMessage);
        } else {
            if (passMessage != null) {
                this.log.info(passMessage);
            }
        }
    }
}
