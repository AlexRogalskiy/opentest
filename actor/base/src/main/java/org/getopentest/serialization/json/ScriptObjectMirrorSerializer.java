package org.getopentest.serialization.json;

import com.google.gson.Gson;
import com.google.gson.JsonElement;
import com.google.gson.JsonSerializationContext;
import com.google.gson.JsonSerializer;
import jdk.nashorn.api.scripting.ScriptObjectMirror;

public class ScriptObjectMirrorSerializer implements JsonSerializer<ScriptObjectMirror> {

    public ScriptObjectMirrorSerializer() {
        super();
    }

    @Override
    public JsonElement serialize(ScriptObjectMirror src, java.lang.reflect.Type typeOfSrc, JsonSerializationContext context) {
        Gson gson = new Gson();
        
        if (src.isArray()) {
            return gson.toJsonTree(src.values());
        } else {
            return gson.toJsonTree(src);
        }
    }
}
