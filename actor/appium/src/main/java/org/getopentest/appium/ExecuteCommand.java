package org.getopentest.appium;

import java.util.Map;
import org.getopentest.appium.core.AppiumTestAction;
import org.openqa.selenium.remote.Response;

/**
 * Executes a mobile command.
 */
public class ExecuteCommand extends AppiumTestAction {

    @Override
    public void run() {
        String command = this.readStringArgument("command");
        Map<String, Object> commandArgs = this.readMapArgument("commandArgs", null);

        Response response = this.driver.execute(command, commandArgs);
        
        String sessionId = response.getSessionId();
        String state = response.getState();
        int status = response.getStatus();
        Object value = response.getValue();
        
        this.writeOutput("sessionId", sessionId);
        this.writeOutput("state", state);
        this.writeOutput("status", status);
        this.writeOutput("value", value);
    }

}
