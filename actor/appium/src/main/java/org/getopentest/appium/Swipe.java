package org.getopentest.appium;

import org.getopentest.appium.core.AppiumTestAction;
import org.getopentest.appium.core.SwipeOptions;
import org.openqa.selenium.By;

public class Swipe extends AppiumTestAction {

    @Override
    public void run() {
        super.run();
        
        By locator = this.readLocatorArgument("locator", null);
        String direction = this.readStringArgument("direction", readStringArgument("swipe", "none"));
        Integer durationMs = this.readIntArgument("durationMs", 1);
        By swipeContainer = this.readLocatorArgument("swipeContainer", null);
        Double defaultVerticalOffset = (swipeContainer == null) ? 0.2 : 0.1;
        Double offsetBottom = this.readDoubleArgument("offsetBottom", defaultVerticalOffset);
        Double offsetLeft = this.readDoubleArgument("offsetLeft", 0.1);
        Double offsetRight = this.readDoubleArgument("offsetRight", 0.1);
        Double offsetTop = this.readDoubleArgument("offsetTop", defaultVerticalOffset);
        
        SwipeOptions options = new SwipeOptions();
        options.container = swipeContainer;
        options.direction = direction;
        options.durationMs = durationMs;
        options.targetElement = locator;
        options.offsetBottom = offsetBottom;
        options.offsetLeft = offsetLeft;
        options.offsetRight = offsetRight;
        options.offsetTop = offsetTop;
        
        this.swipe(options);
        
//        MobileElement element = getElement(locator);
//
//        if (direction.equalsIgnoreCase("up")) {
//            swipeUp(element);
//        } else if (direction.equalsIgnoreCase("down")) {
//            swipeDown(element);
//        } else if (direction.equalsIgnoreCase("left")) {
//            swipeLeft(element);
//        } else if (direction.equalsIgnoreCase("right")) {
//            swipeRight(element);
//        }
    }
}
