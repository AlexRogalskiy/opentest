package org.getopentest.appium.core;

import org.getopentest.util.Config;
import org.openqa.selenium.By;

/**
 * Stores all information necessary to perform a swipe.
 */
public class SwipeOptions {

    /**
     * The condition to check on the target UI element while swiping.
     */
    public Condition condition;
    
    /**
     * The UI element that the swipe will be executed into. All coordinate
     * calculations are going to be performed relative to the position and size
     * of the swipe container element.
     */
    public By container;

    /**
     * The direction of the swipe (up, down, left, right, top, bottom, leftmost,
     * rightmost).
     */
    public String direction;

    /**
     * The duration of the swipe gesture, in milliseconds.
     */
    public Integer durationMs;

    /**
     * Maximum number of swipe gestures allowed in search of the target element
     * (or edge) before we give up.
     */
    public Integer maxSwipes;

    /**
     * Percentage of the swipe container height that the swipe gesture will
     * start or end at, from the bottom side of the container.
     */
    public Double offsetBottom;

    /**
     * Percentage of the swipe container width that the swipe gesture will start
     * or end at, from the left side of the container.
     */
    public Double offsetLeft;

    /**
     * Percentage of the swipe container width that the swipe gesture will start
     * or end at, from the right side of the container.
     */
    public Double offsetRight;

    /**
     * Percentage of the swipe container height that the swipe gesture will
     * start or end at, from the top side of the container.
     */
    public Double offsetTop;

    /**
     * The UI element that we are looking for, as we are swiping. The swipe will
     * stop as soon as we have found the element.
     */
    public By targetElement;
    
    /**
     * Specifies whether finding the target UI element is optional. This is only
     * relevant when the target element has been set.
     */
    public boolean targetIsOptional;

    public SwipeOptions() {
        Config config = AppiumHelper.getConfig();

        this.condition = Condition.VISIBILITY;
        this.container = null;
        this.direction = "none";
        this.durationMs = 1000;
        this.maxSwipes = config.getInteger("appium.maxSwipes", config.getInteger("appium.maxSwipeCount", 20));
        this.offsetBottom = 0.2;
        this.offsetLeft = 0.1;
        this.offsetRight = 0.1;
        this.offsetTop = 0.2;
        this.targetElement = null;
        this.targetIsOptional = false;
    }
}
