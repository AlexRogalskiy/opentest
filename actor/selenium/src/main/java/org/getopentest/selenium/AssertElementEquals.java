package org.getopentest.selenium;

import org.openqa.selenium.By;
import org.openqa.selenium.WebElement;

public class AssertElementEquals
  extends SeleniumTestAction
{
  public void run()
  {
    super.run();
    
    By locator = readLocatorArgument("locator");
    String text = readStringArgument("text", null);
    
    waitForAsyncCallsToFinish();
    
    WebElement element = getElement(locator);
    String elementText = element.getText();
    
    boolean textIsValid = false;
    if (text != null) {
      textIsValid = elementText.equalsIgnoreCase(text);
    } else {
      throw new RuntimeException("Neither the \"text\" argument, nor the \"textContains\" argument were provided.");
    }
    if (!textIsValid) {
      throw new RuntimeException(String.format("Assertion failed: the element text on element %s failed validation", new Object[] { locator }));
    }
  }
}
