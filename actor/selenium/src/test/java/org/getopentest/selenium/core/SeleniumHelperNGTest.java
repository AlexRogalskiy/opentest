package org.getopentest.selenium.core;

import java.awt.Rectangle;
import java.nio.charset.StandardCharsets;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.Arrays;
import java.util.List;
import static org.testng.Assert.*;
import org.testng.annotations.Test;

public class SeleniumHelperNGTest {

    @Test
    public void parseResolution() {

        writeConfigFile("actor.yaml", "");

        Rectangle resolution1 = SeleniumHelper.parseResolution("1024x768");
        Rectangle resolution2 = SeleniumHelper.parseResolution("1024X768");
        Rectangle resolution3 = SeleniumHelper.parseResolution("1024,768");
        Rectangle resolution4 = SeleniumHelper.parseResolution("1024 , 768");
        Rectangle resolution5 = SeleniumHelper.parseResolution("100,100,1024,768");
        Rectangle resolution6 = SeleniumHelper.parseResolution("");

        assertTrue(resolution1.equals(new Rectangle(0, 0, 1024, 768)));
        assertTrue(resolution2.equals(new Rectangle(0, 0, 1024, 768)));
        assertTrue(resolution3.equals(new Rectangle(0, 0, 1024, 768)));
        assertTrue(resolution4.equals(new Rectangle(0, 0, 1024, 768)));
        assertTrue(resolution5.equals(new Rectangle(100, 100, 1024, 768)));
        assertTrue(resolution6 == null);
    }

    /**
     * Writes the "actor.yaml" file in the working directory.
     */
    public void writeConfigFile(String fileName, String fileContents) {
        try {
            String workDir = System.getProperty("user.dir");
            Path yamlPath = Paths.get(workDir, fileName);
            List<String> lines = Arrays.asList(fileContents);
            Files.write(yamlPath, lines, StandardCharsets.UTF_8);
        } catch (Exception exc) {
        }
    }
}
