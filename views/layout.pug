doctype html
html
	head
		block head
			title= title || 'DTest'
			meta(name="viewport", content="width=device-width, initial-scale=1.0")
			meta(http-equiv="X-UA-Compatible", content="IE=Edge")
			link(rel='stylesheet', href='/css/bootstrap.min.css')
			//link(rel='stylesheet', href='/css/bootstrap-theme.min.css')
			link(rel='stylesheet', href='/css/style.css')
			link(rel="icon" href="/favicon.ico?v=1")
			
			| <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
			| <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
			| <!--[if lt IE 9]>
			|   <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
			|   <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
			| <![endif]-->
			
			script(src="/lib/jquery.min.js")
			script(src="/lib/angular.js")
	body(ng-app="ngApp" ng-controller="GlobalCtrl")
		nav.navbar.navbar-default.header
			div.container
				div.navbar-header
					button.navbar-toggle.collapsed(type="button" data-toggle="collapse" data-target="#main-menu" aria-expanded="false")
						span.sr-only Toggle navigation
						span.icon-bar
						span.icon-bar
						span.icon-bar
					a.navbar-brand(href="/") DTest

				div.collapse.navbar-collapse(id="main-menu")
					ul.nav.navbar-nav
						li
							a(href="/") Home
						li.dropdown
							a.dropdown-toggle(href="#" data-toggle="dropdown")
								| Session 
								span.caret
							ul.dropdown-menu
								li
									a(href="#" data-toggle="modal" data-target="#create-session") Create Test Session
								li
									a(href="#" data-toggle="modal" data-target="#create-template") Create Test Session Template
		p
		block content
		
		//- Create session template modal dialog
		div.modal.fade.create-session(id="create-template")
			div.modal-dialog.modal-lg
				div.modal-content
					div.modal-header
						button.close(data-dismiss="modal") &times;
						p.modal-title Create Test Session Template
					div.modal-body
						p Select tests
					div.modal-footer
						button.btn.btn-secondary() Create Template

		//- Create session modal dialog
		div.modal.fade.create-session(id="create-session")
			div.modal-dialog.modal-lg
				div.modal-content
					div.modal-header
						button.close(data-dismiss="modal") &times;
						p.modal-title Create Test Session
					div.modal-body
						div
							button.btn.btn-secondary(data-dismiss="modal" ng-click="vm.runTestSession()") Run Session
							p
							table.table.table-condensed.table-hover(ng-cloak ng-hide="!vm.tests.length" style="table-layout: fixed; word-wrap: break-word;")
								//thead
									th(style="width: 40px;")
									th(style="width: 40%;") Test Name
									th(style="width: 45%;") Path
									th(style="width: auto;") Actors
								tbody
									tr(ng-repeat="test in vm.tests")
										td(style="width: 40px;")
											input(type="checkbox" id="{{test.hash}}" ng-model="test.selected")
										td(style="width: 40%;")
											label(for="{{test.hash}}") {{test.name}}
										td(style="width: 45%;")
											label {{test.path}}
										td(style="width: auto;")
											label {{test.actors.sort().join(', ')}}
							p(ng-hide="vm.tests.length") There are no tests to select from. Tests are populated by test actors when they start. 

							p
							button.btn.btn-secondary(data-dismiss="modal" ng-click="vm.runTestSession()") Run Session
							
					//div.modal-footer

		script(src="/lib/bootstrap.min.js")
		script(src="/lib/js.cookie.js")
		script(src="/lib/moment.min.js")
		script(src="/lib/moment-timezone.min.js")
		script(src="/js/ng/ngApp.js")
		script(src="/js/ng/GlobalCtrl.js")
		
		script.
			// Highlight the menu option that corresponds to the current location 
			$('a[href="' + this.location.pathname + '"]').parents('li,ul').addClass('active');

		block body_footer